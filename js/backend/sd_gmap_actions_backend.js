jQuery(document).ready(function(l){l("input.attachment-manager").click(function(t){t.preventDefault();$input=l("input#attachments");$oldValue=$input.val();var i;if(i){i.open()}i=wp.media({title:"Select Media",multiple:true});i.on("close",function(){var t=i.state().get("selection");var n=new Array;var s=0;t.each(function(t){var e=t.toJSON();if(e.title!=""){var i=e.title}else{var i=e.filename}var a='<div class="attachment-wrap"><div>'+i+" ("+e.filesizeHumanReadable+')</div><div data-attachment-id="'+e.id+'" class="button remove-attachment"><span class="dashicons dashicons-trash"></span></div></div>';l(".attachments-list").append(a);n[s]=t["id"];s++});l(".remove-attachment").click(function(){counter=1;id=console.log(l(this).attr("data-attachment-id"));l(this).parents(".attachment-wrap").remove();e="";length=l(".attachment-wrap").length;l(".attachment-wrap").each(function(){e+=l(this).find(".remove-attachment").attr("data-attachment-id");if(counter<length){e+=",";counter++}});l("input#attachments").val(e)});var e=n.join(",");if($oldValue!=""){e=$oldValue+","+e}l($input).val(e)});i.open()})});jQuery(function(t){t(".remove-attachment").click(function(){counter=1;id=console.log(t(this).attr("data-attachment-id"));t(this).parents(".attachment-wrap").remove();ids="";length=t(".attachment-wrap").length;t(".attachment-wrap").each(function(){ids+=t(this).find(".remove-attachment").attr("data-attachment-id");if(counter<length){ids+=",";counter++}});t("input#attachments").val(ids)})});jQuery(document).ready(function(s){s(".add").click(function(){var t=s(this).prev(".dynamic-fields").find("tr").find("input");var n=0;s.each(t,function(t,e){e=s(this).attr("name");var i=/^.*\[([0-9]+)\].*/;var a=Number(e.match(i)[1]);if(a>n){n=a}});n+=1;var e=s(this).prev(".dynamic-fields").find(".first-row").clone();s(this).prev(".dynamic-fields").append(e);var i=s(this).prev(".dynamic-fields").find("tr").last().find("input").attr("id");s(this).prev(".dynamic-fields").find("tr").last().find(".sd_input").attr("name",i+"["+n+"][field1]").val("");s(this).prev(".dynamic-fields").find("tr").last().find(".sd_input_additional").attr("name",i+"["+n+"][field3]").val("");s(this).prev(".dynamic-fields").find("tr").last().find("select").attr("name",i+"["+n+"][field2]");s(this).prev(".dynamic-fields").find("tr").last().find("td").last().append('<span class="remove"> <span class="dashicons dashicons-trash"></span></span>');s(e).removeClass("first-row");return false});s(".dynamic-fields tbody").on("change",".selectbox",function(){var t=s(this).val();if(t=="free"){console.log("free");s(this).parents("tr").find(".sd_input_additional").attr("type","text")}else{console.log("nope");s(this).parents("tr").find(".sd_input_additional").attr("type","hidden")}});s(".remove").live("click",function(){s(this).parents("tr").remove()})});jQuery(document).ready(function(s){s("input.media-manager").click(function(t){t.preventDefault();$input=s("input#slides");$oldValue=$input.val();var n;if(n){n.open()}n=wp.media({title:"Select Media",multiple:true,library:{type:"image"}});n.on("close",function(){var t=n.state().get("selection");var e=new Array;var i=0;t.each(function(t){image='<div class="slide-wrap"><img class="slide-img-prev" src="'+t.toJSON().url.replace(".jpg","-150x150.jpg")+'"><div data-imageid="'+t.toJSON().id+'" class="button remove-slide"><span class="dashicons dashicons-trash"></span></div>';console.log(image);s(".slide-preview").append(image);e[i]=t["id"];i++});s(".remove-slide").click(function(){counter=1;id=console.log(s(this).attr("data-imageid"));s(this).parents(".slide-wrap").remove();a="";length=s(".slide-wrap").length;s(".slide-wrap").each(function(){a+=s(this).find(".remove-slide").attr("data-imageid");if(counter<length){a+=",";counter++}});s("input#slides").val(a)});var a=e.join(",");if($oldValue!=""){a=$oldValue+","+a}s($input).val(a)});n.open()});s("input.media-manager-image").click(function(t){t.preventDefault();$input=s("input#image");var e;if(e){e.open()}e=wp.media({title:"Select Media",multiple:false,library:{type:"image"}});e.on("close",function(){var t=e.state().get("selection");s(".image-preview").empty();t.each(function(t){image='<div class="slide-wrap"><img class="slide-img-prev" src="'+t.toJSON().url.replace(".jpg","-150x150.jpg")+'"><div data-imageid="'+t.toJSON().id+'" class="button remove-slide"><span class="dashicons dashicons-trash"></span></div>';id=t["id"];s(".image-preview").append(image)});s(".remove-image").click(function(){s(this).parents(".slide-wrap").remove();s($input).val("")});s($input).val(id)});e.open()})});jQuery(function(t){t(".remove-image").click(function(){t(this).parents(".slide-wrap").remove();t("input#image").val("")});t(".remove-slide").click(function(){counter=1;id=console.log(t(this).attr("data-imageid"));t(this).parents(".slide-wrap").remove();ids="";length=t(".slide-wrap").length;t(".slide-wrap").each(function(){ids+=t(this).find(".remove-slide").attr("data-imageid");if(counter<length){ids+=",";counter++}});t("input#slides").val(ids)})});jQuery(function(t){if(t(".dynamic-fields").length>0){t(".dynamic-fields tbody").sortable()}});jQuery(function(i){i(".link-button").on("click",function(t){var e=i(this).next(".link-value").attr("id");wpLink.open(e);i("#wp-link-submit").click(function(){var t=i.trim(i("#wp-link-url").val());i("#"+e).val(t)});return false})});